<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Model Benchmark Table</title>
  <link rel="stylesheet" type="text/css"
        href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css"/>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
  <style>
    /* 숫자가 높을수록 파란색 음영이 진하게 보이도록 스타일링 */
    table.dataTable tbody td {
      text-align: center;
    }
    /* 숫자 셀에 클래스 'shade'를 주고 JS에서 색상 계산 */
  </style>
</head>
<body>
  <h2>Model Benchmark Table</h2>
  <table id="modelTable" class="display" style="width:100%">
    <thead>
      <tr>
        <th>Model</th>
        <th>Param</th>
        <th>Exec. Rate</th>
        <th>Text</th>
        <th>Layout</th>
        <th>Type</th>
        <th>Color</th>
        <th>Low-Level Avg.</th>
        <th>GPT</th>
        <th>Overall</th>
      </tr>
    </thead>
    <tbody>
      <tr><td>GPT-4o</td><td>-</td><td>93.2</td><td>81.5</td><td>89.8</td><td>77.3</td><td>67.2</td><td>79.0</td><td>83.5</td><td>81.2</td></tr>
      <tr><td>Claude-3-opus</td><td>83.3</td><td>83.3</td><td>66.8</td><td>83.1</td><td>49.9</td><td>42.1</td><td>60.5</td><td>60.1</td><td>60.3</td></tr>
      <tr><td>InternVL2-Llama3-76B</td><td>76.0B</td><td>83.2</td><td>54.1</td><td>74.5</td><td>49.2</td><td>41.5</td><td>54.8</td><td>62.2</td><td>58.5</td></tr>
      <tr><td>MiniCPM-Llama3-V-8B</td><td>8.4B</td><td>80.3</td><td>30.7</td><td>49.6</td><td>38.6</td><td>27.6</td><td>36.6</td><td>42.1</td><td>39.4</td></tr>
      <tr><td>InternVL2-26B</td><td>26.0B</td><td>69.3</td><td>39.2</td><td>58.7</td><td>35.9</td><td>31.8</td><td>41.4</td><td>47.4</td><td>44.4</td></tr>
      <tr><td>GeminiProVision</td><td>-</td><td>68.2</td><td>52.6</td><td>64.2</td><td>51.3</td><td>47.1</td><td>53.8</td><td>53.3</td><td>53.6</td></tr>
      <tr><td>Qwen2-VL-7B</td><td>8.2B</td><td>67.0</td><td>26.4</td><td>51.0</td><td>31.0</td><td>23.3</td><td>32.9</td><td>35.0</td><td>34.0</td></tr>
      <tr><td>Phi-3-Vision-128K</td><td>4.2B</td><td>66.7</td><td>37.5</td><td>49.6</td><td>37.4</td><td>29.8</td><td>38.6</td><td>41.0</td><td>39.8</td></tr>
      <tr><td>InternVL2-4B</td><td>4.2B</td><td>66.2</td><td>34.7</td><td>51.7</td><td>25.2</td><td>23.6</td><td>33.8</td><td>33.8</td><td>36.1</td></tr>
      <tr><td>InternVL2-8B</td><td>8.1B</td><td>61.8</td><td>31.5</td><td>51.1</td><td>28.6</td><td>26.2</td><td>34.4</td><td>38.9</td><td>36.6</td></tr>
      <tr><td>LLaVA-Next-Mistral-7B</td><td>7.6B</td><td>59.7</td><td>14.0</td><td>31.1</td><td>19.8</td><td>17.8</td><td>20.7</td><td>21.3</td><td>21.0</td></tr>
      <tr><td>InternVL2-2B</td><td>2.2B</td><td>52.5</td><td>23.6</td><td>35.8</td><td>16.0</td><td>15.4</td><td>22.7</td><td>24.2</td><td>23.5</td></tr>
      <tr><td>CogVlm2-llama3-chat-8B</td><td>19.2B</td><td>50.5</td><td>21.3</td><td>31.8</td><td>18.4</td><td>17.0</td><td>22.1</td><td>24.5</td><td>23.3</td></tr>
      <tr><td>LLaVA-Next-Yi-34B</td><td>34.8B</td><td>50.2</td><td>15.9</td><td>29.6</td><td>17.6</td><td>15.2</td><td>19.6</td><td>20.6</td><td>20.1</td></tr>
      <tr><td>IDEFICS2-8B</td><td>7.6B</td><td>49.0</td><td>20.6</td><td>33.1</td><td>9.2</td><td>9.0</td><td>14.4</td><td>17.6</td><td>16.0</td></tr>
      <tr><td>Qwen2-VL-2B</td><td>2.6B</td><td>47</td><td>20.1</td><td>29.5</td><td>21.3</td><td>17.9</td><td>22.2</td><td>23.4</td><td>22.8</td></tr>
      <tr><td>DeepSeek-VL-7B</td><td>7.3B</td><td>41.3</td><td>15.3</td><td>26.6</td><td>19.7</td><td>14.5</td><td>19.0</td><td>20.4</td><td>19.7</td></tr>
      <tr><td>Gemma-3-4b-it</td><td>4.3B</td><td>64.8</td><td>27.1</td><td>38.3</td><td>40.8</td><td>24.3</td><td>32.6</td><td>-</td><td>-</td></tr>
      <tr><td>Gemma-3-4b-it_trained</td><td>4.3B</td><td>53.6</td><td>30.0</td><td>42.3</td><td>53.0</td><td>27.5</td><td>38.2</td><td>-</td><td>-</td></tr>
    </tbody>
  </table>

  <script>
    // DataTable 초기화
    $(document).ready(function () {
      $('#modelTable').DataTable({
        paging: false,
        info: false,
        lengthChange: false
      });

      // 각 숫자 셀에 대해 색상 그라데이션 적용
      const table = $('#modelTable').DataTable();
      // 색상 적용할 컬럼 인덱스들 (Exec. Rate ~ Overall, 즉 2~9)
      const colorColumns = [2,3,4,5,6,7,8,9];

      // 전체 숫자 셀에서 최대값과 최소값 찾기 (색상 스케일 위해)
      let minVal = 1000;
      let maxVal = -1000;

      table.rows().every(function() {
        let data = this.data();
        colorColumns.forEach(idx => {
          let val = parseFloat(data[idx]);
          if (!isNaN(val)) {
            if(val > maxVal) maxVal = val;
            if(val < minVal) minVal = val;
          }
        });
      });

      // 색상 계산 함수 (높을수록 진한 파랑)
      function getBlueShade(value) {
        // value: minVal~maxVal -> 0~1로 정규화
        let ratio = (value - minVal) / (maxVal - minVal);
        // rgb(0,0,255)에서 밝기 조절 (밝을수록 더 연하게)
        // ratio가 클수록 더 진한 파랑 (0: 밝음, 1: 진함)
        let blue = 255;
        let lightness = 255 - Math.floor(ratio * 180); // 255~75 범위 밝기 조절
        return `rgb(${lightness},${lightness},${blue})`;
      }

      function getPinkShade(value) {
        // value: minVal~maxVal -> 0~1로 정규화
        let ratio = (value - minVal) / (maxVal - minVal);
        // rgb(0,0,255)에서 밝기 조절 (밝을수록 더 연하게)
        // ratio가 클수록 더 진한 파랑 (0: 밝음, 1: 진함)
        let red = 255;
        let lightness = 255 - Math.floor(ratio * 180); // 255~75 범위 밝기 조절
        return `rgb(${red},${lightness},${lightness})`;
      }


      // 색상 적용
      table.rows().every(function(rowIdx, tableLoop, rowLoop){
        let data = this.data();
        const modelName = data[0]; // 첫번째 컬럼: 모델 이름

        colorColumns.forEach(colIdx => {
          let cell = $(table.cell(rowIdx, colIdx).node());
          let val = parseFloat(data[colIdx]);
          if(!isNaN(val)) {
            if(modelName === "Gemma-3-4b-it" || modelName === "Gemma-3-4b-it_trained") {
              cell.css('background-color', getPinkShade(val));
              cell.css('color', 'black');
              cell.css('font-weight', '600');
            } else {
              cell.css('background-color', getBlueShade(val));
              cell.css('color', 'black');
              cell.css('font-weight', '600');
            }
          }
        });
      });
    });
  </script>
</body>
</html>
